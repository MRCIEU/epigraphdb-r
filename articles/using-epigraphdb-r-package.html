<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using EpiGraphDB R package • epigraphdb</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Using EpiGraphDB R package">
<meta property="og:description" content="epigraphdb">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epigraphdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/using-epigraphdb-r-package.html">Using R package</a>
    </li>
    <li>
      <a href="../articles/using-epigraphdb-api.html">Using API</a>
    </li>
    <li>
      <a href="../articles/options.html">Options</a>
    </li>
    <li>
      <a href="../articles/about.html">About EpiGraphDB</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">CHANGELOG</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MRCIEU/epigraphdb-r">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using EpiGraphDB R package</h1>
            
      
      
      <div class="hidden name"><code>using-epigraphdb-r-package.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"epigraphdb"</span>)
<span class="co">#&gt;   EpiGraphDB v0.2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Web API: http://api.epigraphdb.org</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   To turn off this message, use</span>
<span class="co">#&gt;   suppressPackageStartupMessages({library("epigraphdb")})</span></pre></body></html></div>
<p>As a general principle, we offer two modes of the returned data: a <code>table</code> mode (default) that returns a data frame, and a <code>raw</code> mode that preserves the hierachical structure of the upstream json data and contains other information that might benefit users.</p>
</div>
<div id="mode-table" class="section level2">
<h2 class="hasAnchor">
<a href="#mode-table" class="anchor"></a><code>mode = "table"</code>
</h2>
<p>By default, for ease of use, the query returns a data frame which is a tidyverse <a href="https://tibble.tidyverse.org/"><code>tibble</code></a>:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/mr.html">mr</a></span>(<span class="kw">exposure</span> <span class="kw">=</span> <span class="st">"Body mass index"</span>,
         <span class="kw">outcome</span> <span class="kw">=</span> <span class="st">"Coronary heart disease"</span>)
<span class="no">df</span>
<span class="co">#&gt; # A tibble: 6 x 12</span>
<span class="co">#&gt;   exposure_id exposure_name outcome_id outcome_name estimate     se        p</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1 974         Body mass in… 7          Coronary he…    0.389 0.0493 3.42e-15</span>
<span class="co">#&gt; 2 2           Body mass in… 7          Coronary he…    0.397 0.0727 4.79e- 8</span>
<span class="co">#&gt; 3 95          Body mass in… 7          Coronary he…    0.455 0.0931 1.02e- 6</span>
<span class="co">#&gt; 4 2           Body mass in… 8          Coronary he…    0.331 0.0684 1.31e- 6</span>
<span class="co">#&gt; 5 835         Body mass in… 7          Coronary he…    0.360 0.0756 1.94e- 6</span>
<span class="co">#&gt; 6 974         Body mass in… 8          Coronary he…    0.328 0.0731 6.97e- 6</span>
<span class="co">#&gt; # … with 5 more variables: ci_upp &lt;dbl&gt;, ci_low &lt;dbl&gt;, selection &lt;chr&gt;,</span>
<span class="co">#&gt; #   method &lt;chr&gt;, moescore &lt;dbl&gt;</span></pre></body></html></div>
</div>
<div id="mode-raw" class="section level2">
<h2 class="hasAnchor">
<a href="#mode-raw" class="anchor"></a><code>mode = "raw"</code>
</h2>
<p>Alternatively, you can use <code>results_type = "raw"</code> to get the unformatted response from EpiGraphDB API.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">response</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/mr.html">mr</a></span>(<span class="kw">exposure</span> <span class="kw">=</span> <span class="st">"Body mass index"</span>,
               <span class="kw">outcome</span> <span class="kw">=</span> <span class="st">"Coronary heart disease"</span>,
               <span class="kw">mode</span> <span class="kw">=</span> <span class="st">"raw"</span>)
<span class="no">response</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="fl">2</span>)
<span class="co">#&gt; List of 2</span>
<span class="co">#&gt;  $ query  : chr "MATCH (t1:Gwas)-[r:MR]-&gt;(t2:Gwas) WHERE t1.trait = \"Body mass index\" AND t2.trait = \"Coronary heart disease\"| __truncated__</span>
<span class="co">#&gt;  $ results:List of 6</span>
<span class="co">#&gt;   ..$ :List of 12</span>
<span class="co">#&gt;   ..$ :List of 12</span>
<span class="co">#&gt;   ..$ :List of 12</span>
<span class="co">#&gt;   ..$ :List of 12</span>
<span class="co">#&gt;   ..$ :List of 12</span>
<span class="co">#&gt;   ..$ :List of 12</span></pre></body></html></div>
<p>There are several reasons that a <code>raw</code> mode might benefit you:</p>
<ol style="list-style-type: decimal">
<li><p>The <code>results</code> component preserves the upstream hierachical json structure that might be useful for users aiming for specific tasks such as rendering network plots or batch post-processing the returned data in a large scale.</p></li>
<li><p>The <code>query</code> component returns the <a href="https://neo4j.com/developer/cypher-query-language/">cypher</a> query that fetches data from the EpiGraphDB neo4j databases. EpiGraphDB will offer functionality (forthcoming) for users to send cypher queries to the web API that can return more complex query structure (visit our <a href="http://epigraphdb.org">web app</a> for examples). Once you are sufficiently well-versed in cypher you can construct your own refined queries to better suit your needs.</p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Yi Liu, Valeriia Haberland, Pau Erola, Benjamin Elsworth, Tom Gaunt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
